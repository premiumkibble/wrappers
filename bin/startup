#!/bin/bash

###!!!Do Not Remove!!###
theUser=`hostname|cut -d'-' -f1`
homeCheck=`ls -al /root| grep $theUser`
pkgList="/root/.installPackages"
if [ -z "$homeCheck" ]; then
    ln -s /root/myhome /Users/$theUser 
fi

### Update the package lists ###

apt-get update > /dev/null

### Upgrade installed packages ###

apt-get upgrade -y > /dev/null

### Install packages from /root/.installPackages ###

if [ ! -e "$pkgList" ] ; then
    touch "$pkgList"
    echo '### Load packages at startup by adding them here (one per line) ###' >> "$pkgList"
else
    pkgTargets="`grep -v '###' /root/.installPackages | tr '\n' ' '`"
    if [ -n "$pkgTargets" ]; then
      apt-get install -y $pkgTargets 
    fi
fi

### Install Python packages by adding package names to the end of this list ###

sleep 10 && pip install aiotkinter aioresponses                                  

### Capture the bridge IP address. This ip is only available within the Docker host ###

intIP=`ifconfig eth0 | awk '/ *inet /{print $2}'`
clear


### Print the hostname and bridge ip address ###

echo
echo "The hostname is $HOSTNAME"|/usr/games/lolcat -a -s 40
echo "The external IP is $ip"|/usr/games/lolcat -a -s 40
echo "The bridge IP is $intIP"|/usr/games/lolcat -a -s 40&&echo
exit



